"use strict";
describe('AudioNodeTest', function () {
	var ctx = new AudioContext();
	var osc, gain, filter, out, osc2, splitter, merger;

	beforeEach(function () {});

	it("AudioNode_追加", function () {

		osc = AudioNode_.create(ctx.createOscillator());
		osc.x = 100;
		osc.y = 200;

		gain = AudioNode_.create(ctx.createGain());

		gain.x = 400;
		gain.y = 200;

		filter = AudioNode_.create(ctx.createBiquadFilter());
		filter.x = 250;
		filter.y = 330;

		out = AudioNode_.create(ctx.destination);
		out.x = 750;
		out.y = 300;

		osc2 = AudioNode_.create(ctx.createOscillator());
		osc2.x = 100;
		osc2.y = 600;

		splitter = AudioNode_.create(ctx.createChannelSplitter());
		splitter.x = 250;
		splitter.y = 600;

		merger = AudioNode_.create(ctx.createChannelMerger());
		merger.x = 500;
		merger.y = 600;

		expect(AudioNode_.audioNodes.length).toEqual(7);
	});

	it('コネクション追加後チェック', function () {

		AudioNode_.connect(osc, filter);
		AudioNode_.connect(osc, gain.audioParams[0]);
		AudioNode_.connect(filter, gain);
		AudioNode_.connect(gain, out);
		AudioNode_.connect(merger, out);
		AudioNode_.connect({ node: splitter, param: 0 }, { node: merger, param: 0 });
		AudioNode_.connect({ node: splitter, param: 1 }, { node: merger, param: 1 });
		AudioNode_.connect({ node: splitter, param: 2 }, { node: merger, param: 3 });
		AudioNode_.connect({ node: splitter, param: 3 }, { node: merger, param: 2 });
		AudioNode_.connect({ node: splitter, param: 5 }, { node: merger, param: 5 });
		AudioNode_.connect({ node: splitter, param: 4 }, { node: merger, param: 4 });
		AudioNode_.connect(osc2, splitter);

		expect(AudioNode_.audioConnections.length).toEqual(12);
	});

	it('コネクション削除', function () {
		AudioNode_.remove(osc);
		expect(AudioNode_.audioNodes.length).toEqual(6);
		expect(AudioNode_.audioConnections.length).toEqual(10);
	});

	it('フィルター削除後チェック', function () {
		AudioNode_.remove(filter);
		expect(AudioNode_.audioNodes.length).toEqual(5);
		expect(AudioNode_.audioConnections.length).toEqual(9);
		expect((function () {
			var ret = 0;
			AudioNode_.audioConnections.forEach(function (d) {
				if (d.from.node === filter || d.to.node === filter) {
					++ret;
				}
			});
			return ret;
		})()).toEqual(0);
	});

	it('描画してみる', function () {
		//	osc.audioNode.type = 'sawtooth';
		osc.type = 'sawtooth';
		console.log(osc.type);
		osc.frequency.value = 440;
		// osc.start();
		// osc.stop(ctx.currentTime + 0.1);
		initDraw();
		draw();
		expect(true).toBe(true);
	});
});
//# sourceMappingURL=data:application/json;base64,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QUUsQ0FBQztBQUNQLFFBQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDeEIsQ0FBQyxDQUFDO0NBR0gsQ0FBQyxDQUFDIiwiZmlsZSI6ImF1ZGlvTm9kZVRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuZGVzY3JpYmUoJ0F1ZGlvTm9kZVRlc3QnLCAoKSA9PiB7XHJcblx0dmFyIGN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcclxuXHR2YXIgb3NjLCBnYWluLCBmaWx0ZXIsIG91dCwgb3NjMiwgc3BsaXR0ZXIsIG1lcmdlcjtcclxuXHJcblx0YmVmb3JlRWFjaCgoKSA9PiB7XHJcblxyXG5cdH0pO1xyXG5cclxuXHRpdChcIkF1ZGlvTm9kZV/ov73liqBcIiwgKCkgPT4ge1xyXG5cclxuXHRcdG9zYyA9IEF1ZGlvTm9kZV8uY3JlYXRlKGN0eC5jcmVhdGVPc2NpbGxhdG9yKCkpO1xyXG5cdFx0b3NjLnggPSAxMDA7XHJcblx0XHRvc2MueSA9IDIwMDtcclxuXHJcblx0XHRnYWluID0gQXVkaW9Ob2RlXy5jcmVhdGUoY3R4LmNyZWF0ZUdhaW4oKSk7XHJcblxyXG5cdFx0Z2Fpbi54ID0gNDAwO1xyXG5cdFx0Z2Fpbi55ID0gMjAwO1xyXG5cclxuXHRcdGZpbHRlciA9IEF1ZGlvTm9kZV8uY3JlYXRlKGN0eC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSk7XHJcblx0XHRmaWx0ZXIueCA9IDI1MDtcclxuXHRcdGZpbHRlci55ID0gMzMwO1xyXG5cclxuXHRcdG91dCA9IEF1ZGlvTm9kZV8uY3JlYXRlKGN0eC5kZXN0aW5hdGlvbik7XHJcblx0XHRvdXQueCA9IDc1MDtcclxuXHRcdG91dC55ID0gMzAwO1xyXG5cclxuXHJcblx0XHRvc2MyID0gQXVkaW9Ob2RlXy5jcmVhdGUoY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKSk7XHJcblx0XHRvc2MyLnggPSAxMDA7XHJcblx0XHRvc2MyLnkgPSA2MDA7XHJcblxyXG5cdFx0c3BsaXR0ZXIgPSBBdWRpb05vZGVfLmNyZWF0ZShjdHguY3JlYXRlQ2hhbm5lbFNwbGl0dGVyKCkpO1xyXG5cdFx0c3BsaXR0ZXIueCA9IDI1MDtcclxuXHRcdHNwbGl0dGVyLnkgPSA2MDA7XHJcblxyXG5cdFx0bWVyZ2VyID0gQXVkaW9Ob2RlXy5jcmVhdGUoY3R4LmNyZWF0ZUNoYW5uZWxNZXJnZXIoKSk7XHJcblx0XHRtZXJnZXIueCA9IDUwMDtcclxuXHRcdG1lcmdlci55ID0gNjAwO1xyXG5cclxuXHRcdGV4cGVjdChBdWRpb05vZGVfLmF1ZGlvTm9kZXMubGVuZ3RoKS50b0VxdWFsKDcpO1xyXG5cdH0pO1xyXG5cclxuXHRpdCgn44Kz44ON44Kv44K344On44Oz6L+95Yqg5b6M44OB44Kn44OD44KvJywgKCkgPT4ge1xyXG5cclxuXHRcdEF1ZGlvTm9kZV8uY29ubmVjdChvc2MsIGZpbHRlcik7XHJcblx0XHRBdWRpb05vZGVfLmNvbm5lY3Qob3NjLCBnYWluLmF1ZGlvUGFyYW1zWzBdKTtcclxuXHRcdEF1ZGlvTm9kZV8uY29ubmVjdChmaWx0ZXIsIGdhaW4pO1xyXG5cdFx0QXVkaW9Ob2RlXy5jb25uZWN0KGdhaW4sIG91dCk7XHJcblx0XHRBdWRpb05vZGVfLmNvbm5lY3QobWVyZ2VyLCBvdXQpO1xyXG5cdFx0QXVkaW9Ob2RlXy5jb25uZWN0KHsgbm9kZTogc3BsaXR0ZXIsIHBhcmFtOiAwIH0sIHsgbm9kZTogbWVyZ2VyLCBwYXJhbTogMCB9KTtcclxuXHRcdEF1ZGlvTm9kZV8uY29ubmVjdCh7IG5vZGU6IHNwbGl0dGVyLCBwYXJhbTogMSB9LCB7IG5vZGU6IG1lcmdlciwgcGFyYW06IDEgfSk7XHJcblx0XHRBdWRpb05vZGVfLmNvbm5lY3QoeyBub2RlOiBzcGxpdHRlciwgcGFyYW06IDIgfSwgeyBub2RlOiBtZXJnZXIsIHBhcmFtOiAzIH0pO1xyXG5cdFx0QXVkaW9Ob2RlXy5jb25uZWN0KHsgbm9kZTogc3BsaXR0ZXIsIHBhcmFtOiAzIH0sIHsgbm9kZTogbWVyZ2VyLCBwYXJhbTogMiB9KTtcclxuXHRcdEF1ZGlvTm9kZV8uY29ubmVjdCh7IG5vZGU6IHNwbGl0dGVyLCBwYXJhbTogNSB9LCB7IG5vZGU6IG1lcmdlciwgcGFyYW06IDUgfSk7XHJcblx0XHRBdWRpb05vZGVfLmNvbm5lY3QoeyBub2RlOiBzcGxpdHRlciwgcGFyYW06IDQgfSwgeyBub2RlOiBtZXJnZXIsIHBhcmFtOiA0IH0pO1xyXG5cdFx0QXVkaW9Ob2RlXy5jb25uZWN0KG9zYzIsIHNwbGl0dGVyKTtcclxuXHJcblx0XHRleHBlY3QoQXVkaW9Ob2RlXy5hdWRpb0Nvbm5lY3Rpb25zLmxlbmd0aCkudG9FcXVhbCgxMik7XHJcblx0fSk7XHJcblx0XHRcclxuXHJcblx0aXQoJ+OCs+ODjeOCr+OCt+ODp+ODs+WJiumZpCcsICgpID0+IHtcclxuXHRcdEF1ZGlvTm9kZV8ucmVtb3ZlKG9zYyk7XHJcblx0XHRleHBlY3QoQXVkaW9Ob2RlXy5hdWRpb05vZGVzLmxlbmd0aCkudG9FcXVhbCg2KTtcclxuXHRcdGV4cGVjdChBdWRpb05vZGVfLmF1ZGlvQ29ubmVjdGlvbnMubGVuZ3RoKS50b0VxdWFsKDEwKTtcclxuXHR9KTtcclxuXHJcblx0aXQoJ+ODleOCo+ODq+OCv+ODvOWJiumZpOW+jOODgeOCp+ODg+OCrycsICgpID0+IHtcclxuXHRcdEF1ZGlvTm9kZV8ucmVtb3ZlKGZpbHRlcik7XHJcblx0XHRleHBlY3QoQXVkaW9Ob2RlXy5hdWRpb05vZGVzLmxlbmd0aCkudG9FcXVhbCg1KTtcclxuXHRcdGV4cGVjdChBdWRpb05vZGVfLmF1ZGlvQ29ubmVjdGlvbnMubGVuZ3RoKS50b0VxdWFsKDkpO1xyXG5cdFx0ZXhwZWN0KCgoKSA9PiB7XHJcblx0XHRcdHZhciByZXQgPSAwO1xyXG5cdFx0XHRBdWRpb05vZGVfLmF1ZGlvQ29ubmVjdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG5cdFx0XHRcdGlmIChkLmZyb20ubm9kZSA9PT0gZmlsdGVyIHx8IGQudG8ubm9kZSA9PT0gZmlsdGVyKSB7XHJcblx0XHRcdFx0XHQrK3JldDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm4gcmV0O1xyXG5cdFx0fSkoKSkudG9FcXVhbCgwKTtcclxuXHJcblx0fSk7XHJcblx0XHJcblx0aXQoJ+aPj+eUu+OBl+OBpuOBv+OCiycsKCk9PntcclxuXHRcdC8vXHRvc2MuYXVkaW9Ob2RlLnR5cGUgPSAnc2F3dG9vdGgnO1xyXG5cdFx0b3NjLnR5cGUgPSAnc2F3dG9vdGgnO1xyXG5cdFx0Y29uc29sZS5sb2cob3NjLnR5cGUpO1xyXG5cdFx0b3NjLmZyZXF1ZW5jeS52YWx1ZSA9IDQ0MDtcclxuXHRcdC8vIG9zYy5zdGFydCgpO1xyXG5cdFx0Ly8gb3NjLnN0b3AoY3R4LmN1cnJlbnRUaW1lICsgMC4xKTtcclxuXHRcdGluaXREcmF3KCk7XHJcblx0XHRkcmF3KCk7XHJcblx0XHRleHBlY3QodHJ1ZSkudG9CZSh0cnVlKTtcclxuXHR9KTtcclxuXHRcclxuXHRcclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
